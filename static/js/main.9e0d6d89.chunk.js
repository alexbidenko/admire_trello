(this["webpackJsonpreact-course"]=this["webpackJsonpreact-course"]||[]).push([[0],{14:function(e,n,t){e.exports={column:"Column_column__3F9Jk",column__card:"Column_column__card__jcpPg",column__cardHeader:"Column_column__cardHeader__1DviZ",column__cardTitle:"Column_column__cardTitle__2YDWq",column__redactTitle:"Column_column__redactTitle__d2SCv",column__cardBody:"Column_column__cardBody__1ZM6R",column__addButton:"Column_column__addButton__3UVlm",column__deleteButton:"Column_column__deleteButton__pqYP2"}},18:function(e,n,t){e.exports={header:"Header_header__1VCKf",header__title:"Header_header__title__3Zjy_",header__redactTitle:"Header_header__redactTitle__-5Cjb",header__link:"Header_header__link__3kRkM"}},21:function(e,n,t){e.exports={body:"Body_body__3gqj9",body__content:"Body_body__content__19hj8",body__addColumn:"Body_body__addColumn__25Ft-"}},22:function(e,n,t){e.exports={card:"Card_card__35wN0",card__content:"Card_card__content__gcz6d",card__deleteButton:"Card_card__deleteButton__1mNcH"}},46:function(e,n,t){},47:function(e,n,t){},52:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(0),o=t(9),r=t.n(o),d=(t(46),t(47),t(10)),i=t(18),l=t.n(i),s=[{id:1,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043a\u0438 1",cards:[{id:1,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 1"},{id:2,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 2"},{id:3,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 3"}]},{id:2,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043a\u0438 2",cards:[{id:4,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 1"},{id:5,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 2"},{id:6,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 3"}]},{id:3,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043a\u0438 3",cards:[{id:7,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 1"},{id:8,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 2"},{id:9,content:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 3"}]}],u=function(e){localStorage.setItem("data:board",JSON.stringify(e))},_=t(5),b=t(20),j=function(e){var n=e.isRedact,t=Object(a.useRef)(null);return Object(a.useEffect)((function(){n&&t.current.focus()}),[n]),t},f=t(4),m=function(e){var n=e.isRedact,t=e.content,a=e.inputRef,o=e.onChange,r=e.onRedactToggle,d=e.inputClassName,i=e.textClassName;return n?Object(c.jsx)("input",{value:t,ref:a,onChange:o,onBlur:r,className:d}):Object(c.jsx)("p",{className:i,onClick:r,children:t})},p=function(e){return Object(c.jsx)(m,Object(f.a)({inputClassName:l.a.header__redactTitle,textClassName:l.a.header__title},e))},O=function(){var e=Object(a.useState)(!1),n=Object(d.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(""),i=Object(d.a)(r,2),s=i[0],u=i[1],f=Object(_.f)(),m=j({isRedact:t});return Object(a.useEffect)((function(){u((localStorage.getItem("data:meta")?JSON.parse(localStorage.getItem("data:meta")):{title:"\u041a\u0443\u0440\u0441 React - \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 Trello"}).title)}),[]),Object(a.useEffect)((function(){var e;e={title:s},localStorage.setItem("data:meta",JSON.stringify(e))}),[s]),Object(c.jsxs)("header",{className:l.a.header,children:[Object(c.jsx)(p,{isRedact:t,content:s,onChange:function(e){return u(e.target.value)},inputRef:m,onRedactToggle:function(){return o(!t)}}),"/settings"===f.pathname?Object(c.jsx)(b.b,{to:"/",className:l.a.header__link,children:"\u041d\u0430\u0437\u0430\u0434"}):Object(c.jsx)(b.b,{to:"/settings",className:l.a.header__link,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})},h=t(21),x=t.n(h),g=t(14),v=t.n(g),y=t(22),C=t.n(y),k=t(16),N=t(39),w=t(29),I=t(57),R=(t(52),t(30));function B(){var e=Object(w.a)(["\n    background-color: #f4f5f7;\n    border-radius: 2px;\n    overflow: hidden;\n    width: 768px;\n    z-index: 25;\n    height: 400px;\n    position: fixed;\n    left: 50%;\n    transform: translateX(-50%);\n    top: 48px;\n"]);return B=function(){return e},e}function S(){var e=Object(w.a)(["\n    background-color: rgba(0,0,0,.64);\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n"]);return S=function(){return e},e}var T=Object(a.lazy)((function(){return t.e(3).then(t.bind(null,59))})),P=R.a.div(S()),E=R.a.div(B()),H=function(e){var n=e.isOpen,t=e.onClose,r=Object(N.a)(e,["isOpen","onClose"]),d=Object(a.useMemo)((function(){return document.getElementById("modals")}),[]);return Object(o.createPortal)(Object(c.jsx)(I.a,{in:n,timeout:300,classNames:"modalTransition",unmountOnExit:!0,children:Object(c.jsxs)("div",{children:[Object(c.jsx)(P,{onClick:t}),Object(c.jsx)(E,{children:Object(c.jsx)(a.Suspense,{fallback:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",children:Object(c.jsx)(T,Object(f.a)({},r))})})]})}),d)},D=function(e){var n=e.content,t=e.onUpdate,o=e.columnId,r=e.cardId,i=e.index,l=e.description,s=Object(a.useState)(!n),u=Object(d.a)(s,2),_=u[0],b=u[1],m=Object(a.useState)(!1),p=Object(d.a)(m,2),O=p[0],h=p[1],x=j({isRedact:_}),g=function(){t({type:"delete_card",payload:{column_id:o,card_id:r}})};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(k.b,{draggableId:"card_".concat(r),index:i,children:function(e){return Object(c.jsxs)("div",Object(f.a)(Object(f.a)(Object(f.a)({className:C.a.card,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[_?Object(c.jsx)("textarea",{className:C.a.card__content,value:n,onBlur:function(){return b(!1)},ref:x,onChange:function(e){return t({type:"update_card",payload:{content:e.target.value,column_id:o,card_id:r}})}}):Object(c.jsx)("div",{className:C.a.card__content,onClick:function(){return h(!0)},children:n}),Object(c.jsx)("button",{className:C.a.card__deleteButton,onClick:g,children:Object(c.jsx)("span",{children:"+"})})]}))}}),Object(c.jsx)(H,{isOpen:O,onClose:function(){return h(!1)},content:n,columnId:o,cardId:r,description:l})]})},W=Object(a.memo)(D),A=t(12),F=function(e){return Object(c.jsx)(m,Object(f.a)({inputClassName:v.a.column__redactTitle,textClassName:v.a.column__cardTitle},e))},J=function(e){var n=e.title,t=e.cards,o=e.columnId,r=e.index,i=Object(a.useState)(!n),l=Object(d.a)(i,2),s=l[0],u=l[1],_=j({isRedact:s}),b=Object(A.c)(),m=function(e){e.preventDefault(),b({type:"add_card",payload:{column_id:o,content:""}})};return Object(c.jsx)(k.b,{draggableId:"column_".concat(o),index:r,children:function(e){return Object(c.jsx)("div",Object(f.a)(Object(f.a)({className:v.a.column,ref:e.innerRef},e.draggableProps),{},{children:Object(c.jsxs)("div",{className:v.a.column__card,children:[Object(c.jsx)("div",Object(f.a)(Object(f.a)({className:v.a.column__cardHeader},e.dragHandleProps),{},{children:Object(c.jsx)(F,{isRedact:s,content:n,onChange:function(e){return b({type:"update_column_title",payload:{column_id:o,title:e.target.value}})},inputRef:_,onRedactToggle:function(){return u(!s)}})})),Object(c.jsx)(k.c,{droppableId:"column_".concat(o),type:"COLUMN",children:function(e){return Object(c.jsxs)("div",Object(f.a)(Object(f.a)({className:v.a.column__cardBody,ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,n){return Object(c.jsx)(W,{content:e.content,onUpdate:b,columnId:o,cardId:e.id,index:n,description:e.description},e.id)})),e.placeholder]}))}}),Object(c.jsx)("button",{className:v.a.column__addButton,onClick:m,children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),Object(c.jsx)("button",{className:v.a.column__deleteButton,onClick:function(){return b({type:"delete_column",payload:{delete_column_id:o}})},children:Object(c.jsx)("span",{children:"+"})})]})}))}})},U=t(38),L=function(){var e=Object(A.d)((function(e){return e.board})),n=Object(A.c)(),t=Object(a.useCallback)((function(e){var t=e.source,c=e.destination;if(c)if("board"!==t.droppableId)if(t.droppableId===c.droppableId){if(c.index===t.index)return;n({type:"reorder_cards",payload:{column_id:+t.droppableId.replace("column_",""),source_index:t.index,destination_index:c.index}})}else n({type:"reorder_cards_between_columns",payload:{source_column_id:+t.droppableId.replace("column_",""),destination_column_id:+c.droppableId.replace("column_",""),source_index:t.index,destination_index:c.index}});else n({type:"reorder_columns",payload:{source_index:t.index,destination_index:c.index}})}),[n]);return Object(c.jsx)(U.a,{ignoreElements:".".concat(x.a.body__content," > *"),className:x.a.body,children:Object(c.jsx)(k.a,{onDragEnd:t,children:Object(c.jsx)(k.c,{droppableId:"board",direction:"horizontal",type:"BOARD",children:function(t){return Object(c.jsxs)("div",Object(f.a)(Object(f.a)({className:x.a.body__content,ref:t.innerRef},t.droppableProps),{},{children:[e.map((function(e,n){return Object(c.jsx)(J,{title:e.title,cards:e.cards,columnId:e.id,index:n},e.id)})),t.placeholder,Object(c.jsxs)("button",{className:x.a.body__addColumn,onClick:function(){return n({type:"add_column"})},children:["+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ",e.length?"\u0435\u0449\u0435 \u043e\u0434\u043d\u0443 ":"","\u043a\u043e\u043b\u043e\u043d\u043a\u0443"]})]}))}})})})},z=t(13),M=t(23),q=localStorage.getItem("data:board")?JSON.parse(localStorage.getItem("data:board")):s,Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1?arguments[1]:void 0,t=n.type,c=n.payload,a=void 0===c?{}:c,o=Object(M.a)(e),r=o.findIndex((function(e){return e.id===a.column_id})),i=r>-1?Object(f.a)({},o[r]):null;switch(t){case"update_card":i.cards.find((function(e){return e.id===a.card_id})).content=a.content;break;case"update_card_description":i.cards.find((function(e){return e.id===a.card_id})).description=a.description;break;case"update_column_title":i.title=a.title;break;case"add_card":i.cards=[].concat(Object(M.a)(i.cards),[{id:(new Date).getTime(),content:a.content}]);break;case"add_column":o=[].concat(Object(M.a)(o),[{id:(new Date).getTime(),title:"",cards:[]}]);break;case"delete_card":i.cards=i.cards.filter((function(e){return e.id!==a.card_id}));break;case"delete_column":o=o.filter((function(e){return e.id!==a.delete_column_id}));break;case"reorder_columns":var l=o.splice(a.source_index,1),s=Object(d.a)(l,1),_=s[0];o.splice(a.destination_index,0,_);break;case"reorder_cards":var b=Object(M.a)(i.cards),j=b.splice(a.source_index,1),m=Object(d.a)(j,1),p=m[0];b.splice(a.destination_index,0,p),i.cards=b;break;case"reorder_cards_between_columns":var O=o.findIndex((function(e){return e.id===a.source_column_id})),h=o.findIndex((function(e){return e.id===a.destination_column_id})),x=o[O],g=o[h],v=x.cards.splice(a.source_index,1),y=Object(d.a)(v,1),C=y[0];g.cards.splice(a.destination_index,0,C),o[O]=x,o[h]=g}return i&&(o[r]=i),u(o),o},V=Object(z.c)({board:Z}),Y=Object(z.e)(V),K=function(){return Object(c.jsx)("button",{onClick:function(){return localStorage.clear()},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})};var X=function(){return Object(c.jsx)(A.a,{store:Y,children:Object(c.jsx)(b.a,{basename:"/admire_trello",children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(O,{}),Object(c.jsxs)(_.c,{children:[Object(c.jsx)(_.a,{path:"/settings",children:Object(c.jsx)(K,{})}),Object(c.jsx)(_.a,{path:"/",children:Object(c.jsx)(L,{})})]})]})})})},$=function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,60)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),a(e),o(e),r(e)}))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(c.jsx)(X,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/admire_trello",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/admire_trello","/sw.js");G?(!function(e,n){fetch(e).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Q(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Q(n,e)}))}}(),$()}},[[55,1,2]]]);
//# sourceMappingURL=main.9e0d6d89.chunk.js.map